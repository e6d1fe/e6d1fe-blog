+++
categories = ['JavaScript']
project_url = 'https://e6d1fe.github.io/e6d1fe-blog/post/javascript/'
title = 'Promise'
tags = ['JavaScript', 'promise']
date = 2024-03-01T16:54:26+09:00
draft = false
author = 'Sehyun'
comments = true
readingTime = true
+++

## Promise

### ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ìœ„í•œ ì½œë°± íŒ¨í„´ì˜ ë‹¨ì 

ë¹„ë™ê¸° í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ í•¨ìˆ˜ ë‚´ë¶€ì˜ ë¹„ë™ê¸°ë¡œ ë™ìž‘í•˜ëŠ” ì½”ë“œê°€ ì™„ë£Œë˜ì§€ ì•Šì•˜ë‹¤ í•´ë„ ê¸°ë‹¤ë¦¬ì§€ ì•Šê³  ì¦‰ì‹œ ì¢…ë£Œëœë‹¤.  
**ì¦‰, ë¹„ë™ê¸° í•¨ìˆ˜ ë‚´ë¶€ì˜ ë¹„ë™ê¸°ë¡œ ë™ìž‘í•˜ëŠ” ì½”ë“œëŠ” ë¹„ë™ê¸° í•¨ìˆ˜ê°€ ì¢…ë£Œëœ ì´í›„ì— ì™„ë£Œëœë‹¤.**  
ë”°ë¼ì„œ ë¹„ë™ê¸° í•¨ìˆ˜ ë‚´ë¶€ì˜ ë¹„ë™ê¸°ë¡œ ë™ìž‘í•˜ëŠ” ì½”ë“œì—ì„œ ì²˜ë¦¬ ê²°ê³¼ë¥¼ ì™¸ë¶€ë¡œ ë°˜í™˜í•˜ê±°ë‚˜ ìƒìœ„ ìŠ¤ì½”í”„ì˜ ë³€ìˆ˜ì— í• ë‹¹í•˜ë©´ ê¸°ëŒ€í•œ ëŒ€ë¡œ ë™ìž‘í•˜ì§€ ì•ŠëŠ”ë‹¤.  
ì˜ˆë¥¼ ë“¤ì–´, ë¹„ë™ê¸° í•¨ìˆ˜ì¸ `setTimeout`ì˜ ì½œë°± í•¨ìˆ˜ëŠ” `setTimeout` í•¨ìˆ˜ê°€ ì¢…ë£Œëœ ì´í›„ì— í˜¸ì¶œëœë‹¤.

ë¹„ë™ê¸° í•¨ìˆ˜ëŠ” ë¹„ë™ê¸° ì²˜ë¦¬ ê²°ê³¼ë¥¼ ì™¸ë¶€ì— ë°˜í™˜í•  ìˆ˜ë„ ì—†ê³ , ìƒìœ„ ìŠ¤ì½”í”„ì˜ ë³€ìˆ˜ì— í• ë‹¹í•  ìˆ˜ë„ ì—†ê¸° ë•Œë¬¸ì— ë¹„ë™ê¸° í•¨ìˆ˜ì˜ ì²˜ë¦¬ ê²°ê³¼ì— ëŒ€í•œ í›„ì† ì²˜ë¦¬ëŠ” ë¹„ë™ê¸° í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ìˆ˜í–‰í•´ì•¼ í•œë‹¤.  
ì´ë•Œ ë¹„ë™ê¸° í•¨ìˆ˜ë¥¼ ë²”ìš©ì ìœ¼ë¡œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ í›„ì† ì²˜ë¦¬ë¥¼ ìˆ˜í–‰í•˜ëŠ” ì½œë°± í•¨ìˆ˜ë¥¼ ì „ë‹¬í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì´ë‹¤.  
ì´ëŸ° êµ¬ì¡° ë•Œë¬¸ì— ì½œë°± í•¨ìˆ˜ í˜¸ì¶œì´ ì¤‘ì²©ë˜ì–´ ë³µìž¡ë„ê°€ ë†’ì•„ì§€ëŠ” í˜„ìƒì´ ë°œìƒí•˜ëŠ”ë°, ì´ë¥¼ ì½œë°± í—¬ì´ë¼ê³  í•œë‹¤.

```javascript
get('/step1', (a) => {
  get(`/step2/${a}`, (b) => {
    get(`/step3/${b}`, (c) => {
      get(`/step4/${c}`, (d) => {
        console.log(d);
      });
    });
  });
});
```

ì´ì— ëŒ€í•œ ê°€ìž¥ ì‹¬ê°í•œ ë¬¸ì œì ì€ ì—ëŸ¬ ì²˜ë¦¬ê°€ ê³¤ëž€í•˜ë‹¤ëŠ” ê²ƒì´ë‹¤.

```javascript
try {
  setTimeout(() => {
    throw new Error('Error');
  }, 1000);
} catch (e) {
  console.log(e);
}
```

ìœ„ ì˜ˆì œì—ì„œ `setTimeout` í•¨ìˆ˜ì˜ ì½œë°± í•¨ìˆ˜ê°€ ì‹¤í–‰ë  ë•Œ `setTimeout` í•¨ìˆ˜ëŠ” ì´ë¯¸ ì½œ ìŠ¤íƒì—ì„œ ì œê±°ëœ ìƒíƒœë‹¤. (`setTimeout`ì˜ ì½œë°± í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œ ê²ƒì´ `setTimeout`ì´ ì•„ë‹ˆë¼ëŠ” ì˜ë¯¸)  
ì—ëŸ¬ëŠ” í˜¸ì¶œìž ë°©í–¥, ì¦‰ ì½œ ìŠ¤íƒì˜ ì•„ëž˜ ë°©í–¥ìœ¼ë¡œ ì „íŒŒëœë‹¤.  
í•˜ì§€ë§Œ ì—¬ê¸°ì„œ `setTimeout` í•¨ìˆ˜ì˜ ì½œë°± í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œ ê²ƒì€ `setTimeout` í•¨ìˆ˜ê°€ ì•„ë‹ˆë¯€ë¡œ, ì´ ì½œë°± í•¨ìˆ˜ê°€ ë°œìƒì‹œí‚¨ ì—ëŸ¬ëŠ” `catch` ë¸”ë¡ì—ì„œ ìºì¹˜ë˜ì§€ ì•ŠëŠ”ë‹¤.

### í”„ë¡œë¯¸ìŠ¤ì˜ ìƒì„±

`Promise` ìƒì„±ìž í•¨ìˆ˜ëŠ” ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ìˆ˜í–‰í•  ì½œë°± í•¨ìˆ˜ë¥¼ ì¸ìˆ˜ë¡œ ì „ë‹¬ë°›ëŠ”ë° ì´ ì½œë°± í•¨ìˆ˜ëŠ” `resolve`ì™€ `reject` í•¨ìˆ˜ë¥¼ ì¸ìˆ˜ë¡œ ì „ë‹¬ë°›ëŠ”ë‹¤.

```javascript
const promise = new Promise((resolve, reject) => {
    if (/* success */) {
        resolve('result');
    } else {
        reject('reason for failure');
    }
});
```

í”„ë¡œë¯¸ìŠ¤ëŠ” ë‹¤ìŒê³¼ ê°™ì´ í˜„ìž¬ ë¹„ë™ê¸° ì²˜ë¦¬ê°€ ì–´ë–»ê²Œ ì§„í–‰ë˜ê³  ìžˆëŠ”ì§€ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ìƒíƒœ ì •ë³´ë¥¼ ê°–ëŠ”ë‹¤.

| í”„ë¡œë¯¸ìŠ¤ì˜ ìƒíƒœ ì •ë³´ | ì˜ë¯¸                                  | ìƒíƒœ ë³€ê²½ ì¡°ê±´                   |
| -------------------- | ------------------------------------- | -------------------------------- |
| `pending`            | ë¹„ë™ê¸° ì²˜ë¦¬ê°€ ì•„ì§ ìˆ˜í–‰ë˜ì§€ ì•Šì€ ìƒíƒœ | í”„ë¡œë¯¸ìŠ¤ê°€ ìƒì„±ëœ ì§í›„ ê¸°ë³¸ ìƒíƒœ |
| `fulfilled`          | ë¹„ë™ê¸° ì²˜ë¦¬ê°€ ìˆ˜í–‰ëœ ìƒíƒœ (ì„±ê³µ)      | `resolve` í•¨ìˆ˜ í˜¸ì¶œ              |
| `rejected`           | ë¹„ë™ê¸° ì²˜ë¦¬ê°€ ìˆ˜í–‰ëœ ìƒíƒœ (ì‹¤íŒ¨)      | `reject` í•¨ìˆ˜ í˜¸ì¶œ               |

- ë¹„ë™ê¸° ì²˜ë¦¬ ì„±ê³µ: `resolve` í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ í”„ë¡œë¯¸ìŠ¤ë¥¼ `fulfilled` ìƒíƒœë¡œ ë³€ê²½í•œë‹¤.
- ë¹„ë™ê¸° ì²˜ë¦¬ ì‹¤íŒ¨: `reject` í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ í”„ë¡œë¯¸ìŠ¤ë¥¼ `rejected` ìƒíƒœë¡œ ë³€ê²½í•œë‹¤.

ì´ì²˜ëŸ¼ **í”„ë¡œë¯¸ìŠ¤ì˜ ìƒíƒœëŠ” `resolve` ë˜ëŠ” `reject` í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ê²ƒìœ¼ë¡œ ê²°ì •ëœë‹¤**.

í”„ë¡œë¯¸ìŠ¤ëŠ” `pending` ìƒíƒœì—ì„œ `fulfilled`/`rejected` ìƒíƒœë¡œ ë³€í™”í•  ìˆ˜ ìžˆì§€ë§Œ, í•œ ë²ˆ `fulfilled`/`rejected` ìƒíƒœê°€ ë˜ë©´ ë”ëŠ” ë‹¤ë¥¸ ìƒíƒœë¡œ ë³€í™”í•  ìˆ˜ ì—†ë‹¤.

```javascript
const fulfilled = new Promise((resolve) => resolve(1));

const rejected = new Promise((_, reject) => reject(new Error('error occurred')));
```

ë¹„ë™ê¸° ì²˜ë¦¬ê°€ ì„±ê³µí•˜ë©´ í”„ë¡œë¯¸ìŠ¤ëŠ” `pending`ì—ì„œ `fulfilled` ìƒíƒœë¡œ ë³€í™”í•˜ê³ , ë¹„ë™ê¸° ì²˜ë¦¬ ê²°ê³¼ì¸ `1`ì„ ê°’ìœ¼ë¡œ ê°–ëŠ”ë‹¤. (`PromiseResult`)  
ë¹„ë™ê¸° ì²˜ë¦¬ê°€ ì‹¤íŒ¨í•˜ë©´ í”„ë¡œë¯¸ìŠ¤ëŠ” `pending`ì—ì„œ `rejected` ìƒíƒœë¡œ ë³€í™”í•˜ê³ , ë¹„ë™ê¸° ì²˜ë¦¬ ê²°ê³¼ì¸ `Error` ê°ì²´ë¥¼ ê°’ìœ¼ë¡œ ê°–ëŠ”ë‹¤. (`PromiseResult`)

### í”„ë¡œë¯¸ìŠ¤ì˜ í›„ì† ì²˜ë¦¬ ë©”ì„œë“œ

í”„ë¡œë¯¸ìŠ¤ê°€ `fulfilled` ìƒíƒœê°€ ë˜ë©´ í”„ë¡œë¯¸ìŠ¤ì˜ ì²˜ë¦¬ ê²°ê³¼ë¥¼ ê°€ì§€ê³  ë­˜ í• ì§€, `rejected` ìƒíƒœê°€ ë˜ë©´ í”„ë¡œë¯¸ìŠ¤ì˜ ì²˜ë¦¬ ê²°ê³¼(ì—ëŸ¬)ë¥¼ ê°€ì§€ê³  ë­˜ í• ì§€ í›„ì† ì²˜ë¦¬ë¥¼ í•´ì•¼ í•œë‹¤.  
ì´ë¥¼ ìœ„í•´ í”„ë¡œë¯¸ìŠ¤ëŠ” í›„ì† ë©”ì„œë“œ `then`, `catch`, `finally`ë¥¼ ì œê³µí•œë‹¤.  
í”„ë¡œë¯¸ìŠ¤ì˜ ë¹„ë™ê¸° ì²˜ë¦¬ ìƒíƒœê°€ ë³€í™”í•˜ë©´ í›„ì† ì²˜ë¦¬ ë©”ì„œë“œì— ì¸ìˆ˜ë¡œ ì „ë‹¬í•œ ì½œë°± í•¨ìˆ˜ê°€ ì„ íƒì ìœ¼ë¡œ í˜¸ì¶œëœë‹¤.

#### ðŸ“ `Promise.prototype.then`

ë‘ ê°œì˜ ì½œë°± í•¨ìˆ˜ë¥¼ ì¸ìˆ˜ë¡œ ì „ë‹¬ë°›ëŠ”ë‹¤.

- ì²«ë²ˆì§¸ ì½œë°± í•¨ìˆ˜ëŠ” í”„ë¡œë¯¸ìŠ¤ê°€ `fulfilled` ìƒíƒœê°€ ë˜ë©´ í˜¸ì¶œë˜ë©°, ì´ë•Œ ì½œë°± í•¨ìˆ˜ëŠ” í”„ë¡œë¯¸ìŠ¤ì˜ ë¹„ë™ê¸° ì²˜ë¦¬ ê²°ê³¼ë¥¼ ì¸ìˆ˜ë¡œ ì „ë‹¬ë°›ëŠ”ë‹¤.
- ë‘ë²ˆì§¸ ì½œë°± í•¨ìˆ˜ëŠ” í”„ë¡œë¯¸ìŠ¤ê°€ `rejected` ìƒíƒœê°€ ë˜ë©´ í˜¸ì¶œë˜ë©°, ì´ë•Œ ì½œë°± í•¨ìˆ˜ëŠ” í”„ë¡œë¯¸ìŠ¤ì˜ ì—ëŸ¬ë¥¼ ì¸ìˆ˜ë¡œ ì „ë‹¬ë°›ëŠ”ë‹¤.

```javascript
// fulfilled
new Promise((resolve) => resolve('fulfilled')).then(
  (result) => console.log(result),
  (error) => console.error(error)
); // 'fulfilled'

// rejected
new Promise((_, reject) => reject(new Error('rejected'))).then(
  (value) => console.log(value),
  (error) => console.error(error)
); // 'rejected'
```

`then` ë©”ì„œë“œëŠ” ì–¸ì œë‚˜ í”„ë¡œë¯¸ìŠ¤ë¥¼ ë°˜í™˜í•œë‹¤.  
ë§Œì•½ `then` ë©”ì„œë“œì˜ ì½œë°± í•¨ìˆ˜ê°€ í”„ë¡œë¯¸ìŠ¤ë¥¼ ë°˜í™˜í•˜ë©´ ê·¸ í”„ë¡œë¯¸ìŠ¤ë¥¼ ê·¸ëŒ€ë¡œ ë°˜í™˜í•˜ê³ , í”„ë¡œë¯¸ìŠ¤ê°€ ì•„ë‹Œ ê°’ì„ ë°˜í™˜í•˜ë©´ ê·¸ ê°’ì„ ì•”ë¬µì ìœ¼ë¡œ `resolve`/`reject`í•˜ì—¬ í”„ë¡œë¯¸ìŠ¤ë¥¼ ìƒì„±í•´ ë°˜í™˜í•œë‹¤.

#### ðŸ“ `Promise.prototype.catch`

í•œ ê°œì˜ ì½œë°± í•¨ìˆ˜ë¥¼ ì¸ìˆ˜ë¡œ ì „ë‹¬ë°›ìœ¼ë©°, í”„ë¡œë¯¸ìŠ¤ê°€ `rejected` ìƒíƒœì¸ ê²½ìš°ì—ë§Œ í˜¸ì¶œëœë‹¤.

```javascript
new Promise((_, reject) => reject(new Error('rejected'))).catch((error) => console.log(error)); // Error: rejected
```

`then`ê³¼ ë™ì¼í•˜ê²Œ ë™ìž‘í•˜ë¯€ë¡œ ë§ˆì°¬ê°€ì§€ë¡œ ì–¸ì œë‚˜ í”„ë¡œë¯¸ìŠ¤ë¥¼ ë°˜í™˜í•œë‹¤.

#### ðŸ“ `Promise.prototype.finally`

í•œ ê°œì˜ ì½œë°± í•¨ìˆ˜ë¥¼ ì¸ìˆ˜ë¡œ ì „ë‹¬ë°›ìœ¼ë©°, í”„ë¡œë¯¸ìŠ¤ì˜ ì„±ê³µ ë˜ëŠ” ì‹¤íŒ¨ ì—¬ë¶€ì™€ ìƒê´€ì—†ì´ ë¬´ì¡°ê±´ í•œ ë²ˆ í˜¸ì¶œëœë‹¤.  
í”„ë¡œë¯¸ìŠ¤ì˜ ìƒíƒœì™€ ìƒê´€ì—†ì´ ê³µí†µì ìœ¼ë¡œ ìˆ˜í–‰í•´ì•¼ í•  ì²˜ë¦¬ ë‚´ìš©ì´ ìžˆì„ ë•Œ ìœ ìš©í•˜ë©°, `then`/`catch` ë©”ì„œë“œì™€ ë§ˆì°¬ê°€ì§€ë¡œ ì–¸ì œë‚˜ í”„ë¡œë¯¸ìŠ¤ë¥¼ ë°˜í™˜í•œë‹¤.

```javascript
new Promise(() => {}).finally(() => console.log('finally')); // 'finally'
```

### í”„ë¡œë¯¸ìŠ¤ì˜ ì—ëŸ¬ ì²˜ë¦¬

ë¹„ë™ê¸° ì²˜ë¦¬ ê²°ê³¼ì— ëŒ€í•œ í›„ì† ì²˜ë¦¬ëŠ” í”„ë¡œë¯¸ìŠ¤ê°€ ì œê³µí•˜ëŠ” í›„ì† ì²˜ë¦¬ ë©”ì„œë“œ `then`, `catch`, `finally`ë¥¼ ì‚¬ìš©í•´ ìˆ˜í–‰í•œë‹¤.  
ë¹„ë™ê¸° ì²˜ë¦¬ì—ì„œ ë°œìƒí•œ ì—ëŸ¬ëŠ” 1) `then` ë©”ì„œë“œì˜ ë‘ë²ˆì§¸ ì½œë°± í•¨ìˆ˜ ë˜ëŠ” 2) `catch` ë©”ì„œë“œë¥¼ ì‚¬ìš©í•´ ì²˜ë¦¬í•  ìˆ˜ ìžˆë‹¤.

```javascript
promiseGet(wrongURL).then(
  (result) => console.log(result),
  (error) => console.error(error)
);

promiseGet(wrongURL)
  .then((result) => console.log(result))
  .catch((error) => console.error(error));
```

ë‹¨, `then` ë©”ì„œë“œì˜ ë‘ë²ˆì§¸ ì½œë°± í•¨ìˆ˜ëŠ” ì²«ë²ˆì§¸ ì½œë°± í•¨ìˆ˜ì—ì„œ ë°œìƒí•œ ì—ëŸ¬ë¥¼ ìºì¹˜í•˜ì§€ ëª»í•˜ê³  ì½”ë“œê°€ ë³µìž¡í•´ì ¸ ê°€ë…ì„±ì´ ì¢‹ì§€ ì•Šë‹¤.  
**`catch` ë©”ì„œë“œë¥¼ ëª¨ë“  `then` ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œ ì´í›„ì— í˜¸ì¶œí•˜ë©´ ë¹„ë™ê¸° ì²˜ë¦¬ì—ì„œ ë°œìƒí•œ ì—ëŸ¬ë¿ë§Œ ì•„ë‹ˆë¼ `then` ë©”ì„œë“œ ë‚´ë¶€ì—ì„œ ë°œìƒí•œ ì—ëŸ¬ê¹Œì§€ ëª¨ë‘ ìºì¹˜í•  ìˆ˜ ìžˆë‹¤.**

### í”„ë¡œë¯¸ìŠ¤ ì²´ì´ë‹

`then`, `catch`, `finally` í›„ì† ì²˜ë¦¬ ë©”ì„œë“œëŠ” ì–¸ì œë‚˜ í”„ë¡œë¯¸ìŠ¤ë¥¼ ë°˜í™˜í•˜ë¯€ë¡œ ì—°ì†ì ìœ¼ë¡œ í˜¸ì¶œí•  ìˆ˜ ìžˆë‹¤. = **í”„ë¡œë¯¸ìŠ¤ ì²´ì´ë‹**  
ì´ë¥¼ í†µí•´ ì½œë°± í—¬ì„ í”¼í•  ìˆ˜ ìžˆì§€ë§Œ, í”„ë¡œë¯¸ìŠ¤ë„ ì½œë°± íŒ¨í„´ì„ ì‚¬ìš©í•˜ë¯€ë¡œ ì½œë°± í•¨ìˆ˜ë¥¼ ì•„ì˜ˆ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤.  
`async`/`await`ë¥¼ ì‚¬ìš©í•˜ë©´ í”„ë¡œë¯¸ìŠ¤ì˜ í›„ì† ì²˜ë¦¬ ë©”ì„œë“œ ì—†ì´ ë§ˆì¹˜ ë™ê¸° ì²˜ë¦¬ì²˜ëŸ¼ í”„ë¡œë¯¸ìŠ¤ê°€ ì²˜ë¦¬ ê²°ê³¼ë¥¼ ë°˜í™˜í•˜ë„ë¡ êµ¬í˜„í•  ìˆ˜ ìžˆë‹¤.

```javascript
(async () => {
  const { userId } = await promiseGet(`${url}/posts/1`);
  const userInfo = await promiseGet(`${url}/users/${userId}`);
  console.log(userInfo);
})();
```

### ë§ˆì´í¬ë¡œíƒœìŠ¤í¬ í

```javascript
setTimeout(() => console.log(1), 0);

Promise.resolve()
  .then(() => console.log(2))
  .then(() => console.log(3));
```

ìœ„ ì½”ë“œëŠ” 2 - 3 - 1 ìˆœìœ¼ë¡œ ì¶œë ¥ëœë‹¤.  
**í”„ë¡œë¯¸ìŠ¤ì˜ í›„ì† ì²˜ë¦¬ ë©”ì„œë“œì˜ ì½œë°± í•¨ìˆ˜ëŠ” íƒœìŠ¤í¬ íê°€ ì•„ë‹ˆë¼ ë§ˆì´í¬ë¡œíƒœìŠ¤í¬ íì— ì €ìž¥ë˜ê¸° ë•Œë¬¸ì´ë‹¤.**  
ë§ˆì´í¬ë¡œíƒœìŠ¤í¬ íëŠ” íƒœìŠ¤í¬ íì™€ëŠ” ë³„ë„ì˜ íë¡œ, í”„ë¡œë¯¸ìŠ¤ì˜ í›„ì† ì²˜ë¦¬ ë©”ì„œë“œì˜ ì½œë°± í•¨ìˆ˜ê°€ ì¼ì‹œ ì €ìž¥ëœë‹¤.  
ê·¸ ì™¸ì˜ ë¹„ë™ê¸° í•¨ìˆ˜ì˜ ì½œë°± í•¨ìˆ˜ë‚˜ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ëŠ” íƒœìŠ¤í¬ íì— ì¼ì‹œ ì €ìž¥ëœë‹¤.  
ì½œë°± í•¨ìˆ˜ë‚˜ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ ì¼ì‹œ ì €ìž¥í•œë‹¤ëŠ” ì ì—ì„œ ë‘˜ì€ ë¹„ìŠ·í•˜ì§€ë§Œ, **ë§ˆì´í¬ë¡œíƒœìŠ¤í¬ íëŠ” íƒœìŠ¤í¬ íë³´ë‹¤ ìš°ì„ ìˆœìœ„ê°€ ë†’ë‹¤**.

### `fetch`

`XMLHttpRequest` ê°ì²´ì™€ ë§ˆì°¬ê°€ì§€ë¡œ HTTP ìš”ì²­ ì „ì†¡ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ Web APIë‹¤.  
ì‚¬ìš©ë²•ì´ ê°„ë‹¨í•˜ê³  í”„ë¡œë¯¸ìŠ¤ë¥¼ ì§€ì›í•˜ê¸° ë•Œë¬¸ì— ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ìœ„í•œ ì½œë°± íŒ¨í„´ì˜ ë‹¨ì ì—ì„œ ìžìœ ë¡­ë‹¤.  
**`fetch` í•¨ìˆ˜ëŠ” HTTP ì‘ë‹µì„ ë‚˜íƒ€ë‚´ëŠ” `Response` ê°ì²´ë¥¼ ëž˜í•‘í•œ `Promise` ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.**

```javascript
fetch('https://jsonplaceholder.typicode.com/todos/1').then((response) => console.log(response));
```

`fetch` í•¨ìˆ˜ëŠ” HTTP ì‘ë‹µì„ ë‚˜íƒ€ë‚´ëŠ” `Response` ê°ì²´ë¥¼ ëž˜í•‘í•œ í”„ë¡œë¯¸ìŠ¤ë¥¼ ë°˜í™˜í•˜ë¯€ë¡œ í›„ì† ì²˜ë¦¬ ë©”ì„œë“œ `then`ì„ í†µí•´ í”„ë¡œë¯¸ìŠ¤ê°€ resolveí•œ `Response` ê°ì²´ë¥¼ ì „ë‹¬ë°›ì„ ìˆ˜ ìžˆë‹¤.

`fetch` í•¨ìˆ˜ ì‚¬ìš© ì‹œ ì—ëŸ¬ ì²˜ë¦¬ì— ì£¼ì˜í•´ì•¼ í•œë‹¤.

```javascript
fetch(wrongURL)
  .then(() => console.log('ok'))
  .catch(() => console.log('error'));
```

ìœ„ ì½”ë“œì˜ ì˜ˆì‹œì—ì„œ ë¶€ì ì ˆí•œ URLì´ ì§€ì •ë˜ì—ˆìŒì—ë„ `ok`ê°€ ì¶œë ¥ëœë‹¤.  
**`fetch` í•¨ìˆ˜ê°€ ë°˜í™˜í•˜ëŠ” í”„ë¡œë¯¸ìŠ¤ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ HTTP ì—ëŸ¬ê°€ ë°œìƒí•´ë„ ì—ëŸ¬ë¥¼ rejectí•˜ì§€ ì•Šê³  ë¶ˆë¦¬ì–¸ íƒ€ìž…ì˜ `ok`ë¥¼ `false`ë¡œ ì„¤ì •í•œ `Response` ê°ì²´ë¥¼ resolveí•˜ê¸° ë•Œë¬¸ì´ë‹¤.**  
**ì˜¤í”„ë¼ì¸ ë“±ì˜ ë„¤íŠ¸ì›Œí¬ ìž¥ì• ë‚˜ CORS ì—ëŸ¬ì— ì˜í•´ ìš”ì²­ì´ ì™„ë£Œë˜ì§€ ëª»í•œ ê²½ìš°ì—ë§Œ í”„ë¡œë¯¸ìŠ¤ë¥¼ rejectí•œë‹¤.**  
ë”°ë¼ì„œ ë‹¤ìŒê³¼ ê°™ì´ `fetch` í•¨ìˆ˜ê°€ ë°˜í™˜í•œ í”„ë¡œë¯¸ìŠ¤ê°€ resolveí•œ ë¶ˆë¦¬ì–¸ íƒ€ìž…ì˜ `ok`ë¥¼ í™•ì¸í•´ ëª…ì‹œì ìœ¼ë¡œ ì—ëŸ¬ë¥¼ ì²˜ë¦¬í•  í•„ìš”ê°€ ìžˆë‹¤.

```javascript
fetch(wrongURL)
  .then((response) => {
    if (!response.ok) {
      throw new Error(response.statusText);
    }
  })
  .catch(() => console.log('error'));
```

ì°¸ê³ ë¡œ axiosëŠ” ëª¨ë“  HTTP ì—ëŸ¬ë¥¼ rejectí•˜ëŠ” í”„ë¡œë¯¸ìŠ¤ë¥¼ ë°˜í™˜í•˜ê¸° ë•Œë¬¸ì— ëª¨ë“  ì—ëŸ¬ë¥¼ `catch`ì—ì„œ ì²˜ë¦¬í•  ìˆ˜ ìžˆì–´ íŽ¸ë¦¬í•˜ë‹¤.

```javascript
const request = {
  get(url) {
    return fetch(url);
  },

  post(url, payload) {
    return fetch(url, {
      method: 'POST',
      headers: { 'content-Type': 'application/json' },
      body: JSON.stringify(payload),
    });
  },

  patch(url, payload) {
    return fetch(url, {
      method: 'PATCH',
      headers: { 'content-Type': 'application/json' },
      body: JSON.stringify(payload),
    });
  },

  delete(url) {
    return fetch(url, { method: 'DELETE' });
  },
};
```

#### ðŸ“ 1. GET ìš”ì²­

```javascript
request
  .get('https://jsonplaceholder.typicode.com/todos/1')
  .then((response) => {
    if (!response.ok) {
      throw new Error(response.statusText);
    }
    return response.json();
  })
  .then((todos) => console.log(todos))
  .catch((error) => console.error(error));
```

#### ðŸ“ 2. POST ìš”ì²­

```javascript
request
  .post('https://jsonplaceholder.typicode.com/todos', {
    userId: 1,
    title: 'JavaScript',
    completed: false,
  })
  .then((response) => {
    if (!response.ok) {
      throw new Error(response.statusText);
    }
    return response.json();
  })
  .then((todos) => console.log(todos))
  .catch((error) => console.error(error));
```

#### ðŸ“ 3. PATCH ìš”ì²­

```javascript
request
  .patch('https://jsonplaceholder.typicode.com/todos/1', {
    completed: true,
  })
  .then((response) => {
    if (!response.ok) {
      throw new Error(response.statusText);
    }
    return response.json();
  })
  .then((todos) => console.log(todos))
  .catch((error) => console.error(error));
```

#### ðŸ“ 4. DELETE ìš”ì²­

```javascript
request
  .delete('https://jsonplaceholder.typicode.com/todos/1')
  .then((response) => {
    if (!response.ok) {
      throw new Error(response.statusText);
    }
    return response.json();
  })
  .then((todos) => console.log(todos))
  .catch((error) => console.error(error));
```
